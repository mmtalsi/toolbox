import subprocess
import os
import tkinter as tk


def lancer_conteneur_docker_CVE_2024_38473():
    # Obtient le répertoire actuel
    repertoire_actuel = os.getcwd()
    
    # Construit la commande Docker
    commande_docker = [
        "docker", "run",
        "-p", "8787:80",
        "-v", f"{repertoire_actuel}/test-env-webroot:/app",
        "webdevops/php-apache:7.1"
    ]
    
    try:
        # Exécute la commande
        subprocess.run(commande_docker, check=True)
    except subprocess.CalledProcessError as e:
        print(f"Erreur lors de l'exécution du conteneur : {e}")
def arreter_conteneur_docker():
    global process
    if process:
        process.terminate()  # Termine proprement
        process.wait()
        print("Le conteneur a été arrêté.")

def creer_interface():
    root = tk.Tk()
    root.title("Gestion du Conteneur Docker")
    
    btn_quitter = tk.Button(root, text="Quitter", command=arreter_conteneur_docker, font=("Arial", 14), bg="red", fg="white")
    btn_quitter.pack(pady=20)
    
    root.protocol("WM_DELETE_WINDOW", arreter_conteneur_docker)
    root.mainloop()
if __name__ == "__main__":
    lancer_conteneur_docker_CVE_2024_38473()
    creer_interface()
